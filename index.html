<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style>
input.large {
	width: 40%;
	height: 20%;
}
div#namediv {
	border-style: solid ;
	border-width: 1px ;
	color: grey;
	font-style: italic;
	float: left;
}
div#addressdiv {
	border-style: solid ;
	border-width: 1px ;
	width: 40%;
	height: 20%;
	color: grey;
	font-style: italic;
	float: left;
}
.inline {
	display: inline;
}
.left {
	float: left;
}

p {
	width: 18%;
}
input {
	width: 30%;
}
</style>
</head>
<body>
<form id="form">
<p>Nom Prénom : <input type="text" id="name" name="Nom Prénom"></p>
<p>Adresse : <textarea class="large" id="address" name="Adresse" rows=5 cols=40 onchange="osm()">Your address</textarea>
<p>Latitude : <input type="text" id="lat" name="Latitude">
<p>Longitude : <input type="text" id="long" name="Longitude">
</form>
<p class=inline style="float: left;margin:0;">Nom Prenom </p>
<div id="namediv" contenteditable="true">Ajouter </div>
<p> </p>
<p class=inline style="float: left;margin:0;">Adresse </p>
<div id="addressdiv" contenteditable="true">Ajouter </div>
<script>

function osm() {
	var xmlhttp = new XMLHttpRequest();
	var url = "http://nominatim.openstreetmap.org/search?format=json&q=" + document.getElementById("address").value;

	xmlhttp.onreadystatechange = function() {
							if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
								var monjson = JSON.parse(xmlhttp.responseText);
								affiche(monjson);
							}
						}
	xmlhttp.open("GET", url, true);
	xmlhttp.send();

	function affiche(json) {
		if (typeof json[0] != 'undefined') {
			var jlat = json[0].lat;
			var jlon = json[0].lon;
			document.getElementById("lat").value=jlat;
			document.getElementById("long").value=jlon;
		} else {
			document.getElementById("lat").value="indefinie";
			document.getElementById("long").value="indefinie";
		}
	}
}

</script>
</body>
</html>
